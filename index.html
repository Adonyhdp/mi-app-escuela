<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mi-App-Escuela</title>

  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      margin: 0;
      padding: 0;
    }

    header {
      background: #283e51;
      color: #fff;
      padding: 20px;
      text-align: center;
      font-size: 26px;
      font-weight: bold;
      letter-spacing: 1px;
    }

    /* LOGIN */
    .login-box {
      background: #fff;
      width: 350px;
      margin: 80px auto;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      text-align: center;
      animation: fadeIn 0.6s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .login-box h2 {
      margin-bottom: 20px;
      color: #333;
    }

    input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
    }

    button {
      width: 100%;
      padding: 12px;
      background: #4facfe;
      border: none;
      color: #fff;
      font-weight: bold;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.3s;
    }

    button:hover {
      background: #00c6fb;
    }

    /* CONTENIDO INTERNO */
    .tabs {
      display: none;
      padding: 20px;
      animation: fadeIn 0.5s ease;
    }

    .tab-buttons {
      margin-bottom: 20px;
      text-align: center;
    }
<script>

  /* âœ… LOGIN REAL (sin datos ficticios) */
  async function login() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    // âœ… Leer usuarios reales desde Google Sheets
    const usuarios = await leerUsuarios();

    // Buscar usuario
    const usuario = usuarios.find(u => u.correo === email && u.contraseÃ±a === password);

    if (usuario) {

      // Ocultar login
      document.getElementById("loginBox").style.display = "none";

      // Mostrar pestaÃ±as
      document.getElementById("tabs").style.display = "block";

      // Cambiar encabezado
      document.querySelector("header").innerHTML =
        "ðŸ“˜ Mi-App-Escuela â€” Bienvenido: " + usuario.rol.toUpperCase();

      // Cargar listas reales
      loadLists();

    } else {
      alert("Correo o contraseÃ±a incorrectos");
    }
  }


  /* âœ… CAMBIO DE PESTAÃ‘AS */
  function openTab(tabName) {
    const contents = document.querySelectorAll(".tab-content");
    const buttons = document.querySelectorAll(".tab-buttons button");

    contents.forEach(c => c.classList.remove("active"));
    buttons.forEach(b => b.classList.remove("active"));

    document.getElementById(tabName).classList.add("active");
    event.target.classList.add("active");
  }


  /* âœ… FUNCIÃ“N PRINCIPAL PARA CARGAR LISTAS REALES */
  async function loadLists() {

    // âœ… Leer escuelas reales
    const escuelas = await leerEscuelas();
    const escuelasList = document.getElementById("escuelasList");
    escuelasList.innerHTML = "";
    escuelas.forEach(e => {
      const li = document.createElement("li");
      li.textContent = e.nombre;
      li.onclick = () => openTab("salones");
      escuelasList.appendChild(li);
    });

    // âœ… Leer liceos reales
    const liceos = await leerLiceos();
    const liceosList = document.getElementById("liceosList");
    liceosList.innerHTML = "";
    liceos.forEach(l => {
      const li = document.createElement("li");
      li.textContent = l.nombre;
      li.onclick = () => openTab("salones");
      liceosList.appendChild(li);
    });

    // âœ… Leer salones reales
    const salones = await leerHorarios();
    const salonesList = document.getElementById("salonesList");
    salonesList.innerHTML = "";
    salones.forEach(s => {
      const li = document.createElement("li");
      li.textContent = s.salon;
      li.onclick = () => {
        openTab("estudiantes");
        cargarEstudiantesReales();
      };
      salonesList.appendChild(li);
    });
    }
    
    .tab-buttons button {
      margin: 5px;
      padding: 10px 15px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      background: #eee;
      font-size: 15px;
    }

    .tab-buttons button.active {
      background: #4facfe;
      color: #fff;
    }

    .tab-content {
      display: none;
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      animation: fadeIn 0.5s ease;
    }

    .tab-content.active {
      display: block;
    }

    .list {
      list-style: none;
      padding: 0;
    }

    .list li {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      cursor: pointer;
      font-size: 16px;
    }

    .list li:hover {
      background: #f0f8ff;
    }
  </style>
</head>

<body>

<header>ðŸ“˜ Mi-App-Escuela</header>

<!-- LOGIN -->
<div class="login-box" id="loginBox">
  <h2>Ingreso</h2>
  <input type="text" id="email" placeholder="Correo">
  <input type="password" id="password" placeholder="ContraseÃ±a">
  <button onclick="login()">Entrar</button>
</div>

<!-- CONTENIDO INTERNO -->
<div class="tabs" id="tabs">

  <div class="tab-buttons">
    <button onclick="openTab('escuelas')" class="active">Escuelas</button>
    <button onclick="openTab('liceos')">Liceos</button>
    <button onclick="openTab('salones')">Salones</button>
    <button onclick="openTab('estudiantes')">Estudiantes</button>
  </div>

  <!-- Escuelas -->
  <div id="escuelas" class="tab-content active">
    <h3>Escuelas</h3>
    <ul class="list" id="escuelasList"></ul>
  </div>

  <!-- Liceos -->
  <div id="liceos" class="tab-content">
    <h3>Liceos</h3>
    <ul class="list" id="liceosList"></ul>
  </div>

  <!-- Salones -->
  <div id="salones" class="tab-content">
    <h3>Salones / Aulas</h3>
    <ul class="list" id="salonesList"></ul>
  </div>

  <!-- Estudiantes -->
  <div id="estudiantes" class="tab-content">
    <h3>Estudiantes</h3>
    <ul class="list" id="estudiantesList"></ul>
  </div>

  <!-- Datos del estudiante -->
  <div id="datos" class="tab-content">
    <h3>Datos del Estudiante</h3>
    <div id="datosContent"></div>
  </div>

</div>
  /* âœ… PARTE 3 â€” CONEXIÃ“N A GOOGLE SHEETS (MULTIâ€‘PESTAÃ‘A) */

  // âœ… ID de tu hoja (NO CAMBIAR)
  const sheetID = "1EG53O1aC3NqZIFvYmlewjMQboJ5wOGjP89UUC_Gf1-I";

  // âœ… FunciÃ³n genÃ©rica para leer cualquier pestaÃ±a
  async function leerPestaÃ±a(nombrePestaÃ±a) {
    try {
      const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?sheet=${nombrePestaÃ±a}&tqx=out:json`;
      const respuesta = await fetch(url);
      const texto = await respuesta.text();

      // Google envÃ­a basura antes y despuÃ©s del JSON â†’ limpiamos
      const json = JSON.parse(texto.substring(47, texto.length - 2));

      return json.table.rows;

    } catch (error) {
      console.error(`âŒ Error leyendo pestaÃ±a ${nombrePestaÃ±a}:`, error);
      return [];
    }
  }

  /* âœ… LEER USUARIOS (pestaÃ±a: Usuarios) */
  async function leerUsuarios() {
    const filas = await leerPestaÃ±a("Usuarios");

    return filas.map(fila => ({
      correo: fila.c[0]?.v || "",
      contraseÃ±a: fila.c[1]?.v || "",
      rol: fila.c[2]?.v || ""
    })).filter(u => u.correo !== "");
  }

  /* âœ… LEER ESCUELAS (pestaÃ±a: Escuelas) */
  async function leerEscuelas() {
    const filas = await leerPestaÃ±a("Escuelas");

    return filas.map(fila => ({
      nombre: fila.c[0]?.v || ""
    })).filter(e => e.nombre !== "");
  }

  /* âœ… LEER LICEOS (pestaÃ±a: Liceos) */
  async function leerLiceos() {
    const filas = await leerPestaÃ±a("Liceos");

    return filas.map(fila => ({
      nombre: fila.c[0]?.v || ""
    })).filter(l => l.nombre !== "");
  }

  /* âœ… LEER ESTUDIANTES (pestaÃ±a: Estudiantes) */
  async function leerEstudiantes() {
    const filas = await leerPestaÃ±a("Estudiantes");

    return filas.map(fila => ({
      nombre: fila.c[0]?.v || "",
      apellido: fila.c[1]?.v || "",
      edad: fila.c[2]?.v || "",
      peso: fila.c[3]?.v || "",
      entrada: fila.c[4]?.v || "",
      salida: fila.c[5]?.v || "",
      matematicas: fila.c[6]?.v || "",
      historia: fila.c[7]?.v || "",
      ciencias: fila.c[8]?.v || "",
      educacionFisica: fila.c[9]?.v || ""
    })).filter(e => e.nombre !== "");
  }

  /* âœ… LEER HORARIOS (pestaÃ±a: Horarios) */
  async function leerHorarios() {
    const filas = await leerPestaÃ±a("Horarios");

    return filas.map(fila => ({
      salon: fila.c[0]?.v || "",
      entrada: fila.c[1]?.v || "",
      salida: fila.c[2]?.v || ""
    })).filter(h => h.salon !== "");
  }
    /* âœ… PARTE 4 â€” CARGAR Y MOSTRAR DATOS REALES EN LA WEB */


  /* âœ… CARGAR ESTUDIANTES REALES */
  async function cargarEstudiantesReales() {
    const estudiantes = await leerEstudiantes();

    const lista = document.getElementById("estudiantesList");
    lista.innerHTML = "";

    estudiantes.forEach(est => {
      const li = document.createElement("li");
      li.textContent = est.nombre + " " + est.apellido;

      li.onclick = () => mostrarDatosEstudiante(est);

      lista.appendChild(li);
    });
  }


  /* âœ… MOSTRAR DATOS DEL ESTUDIANTE */
  function mostrarDatosEstudiante(est) {
    openTab("datos");

    document.getElementById("datosContent").innerHTML = `
      <p><b>Nombre:</b> ${est.nombre} ${est.apellido}</p>
      <p><b>Edad:</b> ${est.edad}</p>
      <p><b>Peso:</b> ${est.peso} kg</p>
      <p><b>Entrada:</b> ${est.entrada}</p>
      <p><b>Salida:</b> ${est.salida}</p>

      <h4>Calificaciones:</h4>
      <ul>
        <li>MatemÃ¡ticas: ${est.matematicas}</li>
        <li>Historia: ${est.historia}</li>
        <li>Ciencias: ${est.ciencias}</li>
        <li>EducaciÃ³n FÃ­sica: ${est.educacionFisica}</li>
      </ul>
    `;
  }
    /* âœ… PARTE 5 â€” CARGAR ESCUELAS, LICEOS Y SALONES REALES */


  /* âœ… CARGAR ESCUELAS REALES */
  async function cargarEscuelasReales() {
    const escuelas = await leerEscuelas();

    const lista = document.getElementById("escuelasList");
    lista.innerHTML = "";

    escuelas.forEach(e => {
      const li = document.createElement("li");
      li.textContent = e.nombre;
      li.onclick = () => openTab("salones");
      lista.appendChild(li);
    });
  }


  /* âœ… CARGAR LICEOS REALES */
  async function cargarLiceosReales() {
    const liceos = await leerLiceos();

    const lista = document.getElementById("liceosList");
    lista.innerHTML = "";

    liceos.forEach(l => {
      const li = document.createElement("li");
      li.textContent = l.nombre;
      li.onclick = () => openTab("salones");
      lista.appendChild(li);
    });
  }


  /* âœ… CARGAR SALONES REALES (desde pestaÃ±a Horarios) */
  async function cargarSalonesReales() {
    const horarios = await leerHorarios();

    const lista = document.getElementById("salonesList");
    lista.innerHTML = "";

    horarios.forEach(h => {
      const li = document.createElement("li");
      li.textContent = h.salon;

      li.onclick = () => {
        openTab("estudiantes");
        cargarEstudiantesReales();
      };

      lista.appendChild(li);
    });
  }


  /* âœ… REEMPLAZAR loadLists() PARA USAR DATOS REALES */
  async function loadLists() {
    await cargarEscuelasReales();
    await cargarLiceosReales();
    await cargarSalonesReales();
  }

</script>

</body>
</html>

  
